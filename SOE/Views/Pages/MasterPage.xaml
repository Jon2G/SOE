<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://xamarin.com/schemas/2020/toolkit"
             x:Class="SOE.Views.Pages.MasterPage"
             xmlns:fonts="clr-namespace:SOE.Fonts;assembly=SOE"
             xmlns:viewItems="clr-namespace:SOE.Views.ViewItems;assembly=SOE"
             xmlns:scheduleView="clr-namespace:SOE.Views.ViewItems.ScheduleView;assembly=SOE"
             xmlns:pages2="clr-namespace:Kit.Forms.Pages;assembly=Kit.Forms"
             xmlns:data="clr-namespace:SOE.Data;assembly=SOE"
             xmlns:pages="clr-namespace:SOE.ViewModels.Pages;assembly=SOE"
             xmlns:tasksViews="clr-namespace:SOE.Views.ViewItems.TasksViews;assembly=SOE"
             x:DataType="pages:MasterPageViewModel">
    <ContentPage.BindingContext>
        <pages:MasterPageViewModel x:Name="Model" x:FieldModifier="public"/>
    </ContentPage.BindingContext>
    <toolkit:TabView Style="{StaticResource CustomTabStyle}" IsTabStripVisible="True" TabContentHeight="30"
                         x:Name="TabView" x:FieldModifier="public" SelectionChanged="TabView_OnSelectionChanged" IsSwipeEnabled="False">

        <toolkit:TabViewItem HeightRequest="20" >
            <toolkit:TabViewItem.Icon>
                <FontImageSource Size="20"
                                     FontFamily="{x:Static fonts:FontelloIcons.Font}"
                                     Glyph="{x:Static fonts:FontelloIcons.Cal}"
                                     Color="{AppThemeBinding Dark={StaticResource  LightTextColor},
                                                Light={StaticResource DarkTextColor}}" />
            </toolkit:TabViewItem.Icon>
            <viewItems:SchoolGrades x:Name="SchoolGrades"/>
        </toolkit:TabViewItem>

        <toolkit:TabViewItem HeightRequest="20" IsSelected="True"  BadgeText="1" BadgeBackgroundColor="Red" BadgeTextColor="White">
            <toolkit:TabViewItem.Icon >
                <FontImageSource Size="20"
                                     FontFamily="{x:Static fonts:FontelloIcons.Font}"
                                     Glyph="{x:Static fonts:FontelloIcons.Book}"
                                     Color="{AppThemeBinding Dark={StaticResource  LightTextColor},
                                                Light={StaticResource DarkTextColor}}" />
            </toolkit:TabViewItem.Icon>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="94*"/>
                    <RowDefinition Height="5*"/>
                </Grid.RowDefinitions>
                <Grid  Margin="0,0,20,0">
                    <tasksViews:TaskFirstPage x:Name="TaskFirstPage" x:FieldModifier="public"/>
                </Grid>
                <Grid ColumnDefinitions="10,Auto" HorizontalOptions="End" >
                    <viewItems:TimelineBar Grid.Column="1" 
                                               IsVisible="{Binding User.Settings.ShowTimelineBar ,Source={x:Static data:AppData.Instance}}"/>
                </Grid>
                <Label Grid.Row="1" BackgroundColor="#15386f" Text="{x:Static fonts:FontelloIcons.UpArrow}" FontFamily="{x:Static fonts:FontelloIcons.Font}" TextColor="White" HorizontalTextAlignment="Center" VerticalTextAlignment="Start" FontSize="Large">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding OpenMenuCommand}"/>
                    </Label.GestureRecognizers>
                </Label>
            </Grid>
        </toolkit:TabViewItem>

        <!--  FINANCE TAB  -->
        <toolkit:TabViewItem HeightRequest="20">
            <toolkit:TabViewItem.Icon>
                <FontImageSource Size="20"
                        FontFamily="{x:Static fonts:FontelloIcons.Font}"
                        Glyph="{x:Static fonts:FontelloIcons.Calendar}"
                        Color="{AppThemeBinding Dark={StaticResource  LightTextColor},
                                                Light={StaticResource DarkTextColor}}" />
            </toolkit:TabViewItem.Icon>
            <scheduleView:ScheduleViewMain x:Name="ScheduleViewMain"/>
        </toolkit:TabViewItem>
    </toolkit:TabView>
</ContentPage>